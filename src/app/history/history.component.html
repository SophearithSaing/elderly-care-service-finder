<!-- <nav _ngcontent-vuo-c3="" class="navbar navbar-expand-lg">
  <div _ngcontent-vuo-c3="" class="collapse navbar-collapse" id="navbarNavDropdown">
      <div class="header-logo">
          <img src="https://scontent.fbkk12-2.fna.fbcdn.net/v/t1.0-9/79731930_137989890973179_6631381564599042048_n.png?_nc_cat=104&_nc_ohc=KPi8-ipnoqsAQnH6PyVV_Tdfqn0EIo9Thh2OSloW_ETyslvY78sLBCk_A&_nc_ht=scontent.fbkk12-2.fna&oh=96636c40577e051798bef5ac5c7d4404&oe=5E68D64D">
      </div>
      <ul _ngcontent-vuo-c3="" class="navbar-nav">
          <li _ngcontent-vuo-c3="" class="nav-item"><a _ngcontent-vuo-c3="" class="nav-link" routerLink="/elder-home">Home <span _ngcontent-vuo-c3="" class="sr-only">(current)</span></a></li>
          <li _ngcontent-vuo-c3="" class="nav-item"><a _ngcontent-vuo-c3="" class="nav-link" routerLink="/elder-profile">Profile</a></li>
          <li _ngcontent-vuo-c3="" class="nav-item"><a _ngcontent-vuo-c3="" class="nav-link" routerLink="/requests-status">Request Status</a></li>
          <li _ngcontent-vuo-c3="" class="nav-item active"><a _ngcontent-vuo-c3="" class="nav-link" routerLink="/history">History</a></li>
          <li _ngcontent-vuo-c3="" class="nav-item"><a _ngcontent-vuo-c3="" class="nav-link" routerLink="/home">Logout</a></li>
      </ul>
  </div>
</nav> -->

<app-elder-nav>
<div class="container mt-5">
  <h1 style="text-align: center;">History</h1>
  <h5 style="text-align: center;">You can see details of your previous appointments below</h5>
  <!-- <div class="list-group"> -->
  <!-- <mat-spinner *ngIf="isLoading"></mat-spinner> -->
  <div class="list-group" *ngFor="let item of history">
    <div href="#" class="list-group-item list-group-item-action mt-3 mb-3" *ngIf="item.daysAgo > 0">
      <div class="d-flex w-100 justify-content-between">
        <h4 class="mb-1">Caregiver: {{item.caregiverName}}</h4>
        <small *ngIf="item.daysAgo === 1">Yesterday</small>
        <small *ngIf="item.daysAgo < 30 && item.daysAgo > 1">{{item.daysAgo}} days ago</small>
        <small *ngIf="item.daysAgo >= 30">{{item.monthsAgo}} ago</small>
      </div>
      <div class="d-flex w-100 justify-content-between">
        <h4 class="mb-3">Elder: {{item.elderName}}</h4>
      </div>
      <p class="mb-3">From: {{item.startDate}} To: {{item.stopDate}}</p>
      <p class="mb-3">Require Interview: {{item.requireInterview ? 'Yes' : 'No'}}</p>
      <p class="mb-3">Daily Care: {{item.selectedServices.dailyCare}}</p>
      <p class="mb-3">Special Care: {{item.selectedServices.specialCare}}</p>
      <p class="mb-3">Price: {{item.selectedDP}} daily or {{item.selectedMP}} monthly</p>

      <p *ngIf="item.rating !== null">
        <ngb-rating [(rate)]="item.rating" [readonly]="true"></ngb-rating>
      </p>
      <p *ngIf="item.review !== null">
        {{item.review}}
      </p>

      <p *ngIf="reviewed === true">
        Rating: <ngb-rating [(rate)]="rating" [readonly]="true"></ngb-rating>
      </p>
      <p *ngIf="reviewed === true">
        Review:   {{review}}
      </p>

      <div *ngIf="item.rating == null && item.review == null">

        <!-- <ngb-rating [(rate)]="currentRate"></ngb-rating> -->
        <ngb-rating #rating></ngb-rating>
        <!-- <textarea class="form-control mb-3" rows="3" [(ngModel)]="review"></textarea> -->
        <textarea class="form-control mb-3" rows="3" #review></textarea>
        <button class="btn btn-success btn-sm" (click)="saveReview(item, rating.rate, review.value)">Review</button>
      </div>

    </div>
  </div>
</div>
</app-elder-nav>
